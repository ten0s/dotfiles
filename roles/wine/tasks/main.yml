---
#
# https://wiki.winehq.org/Ubuntu
#

- name: Add apt key
  become: true
  apt_key:
    url: https://dl.winehq.org/wine-builds/winehq.key
    state: present
    validate_certs: true

- name: Add apt repo
  become: true
  apt_repository:
    repo: 'deb https://dl.winehq.org/wine-builds/ubuntu/ {{ubuntu_codename}} main'
    state: present

- name: Install utils
  become: true
  apt:
    name:
    - mingw-w64
    - mingw-w64-tools
    state: latest

- name: Install
  become: true
  apt:
    name:
    # See https://wiki.winehq.org/Ubuntu for 'Ubuntu 22.04 and Wine stable'
    # See https://forum.winehq.org/viewtopic.php?t=36232 for 'Wine is too slow'
    - winehq-devel # stable
    install_recommends: true
    state: latest
  register: wine

- debug: msg='Now run Wine -> Configure Wine (winecfg) and install everything it will ask'
  when: wine is changed
